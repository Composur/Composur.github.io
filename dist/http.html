<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1. 基础 | Awesome-FE</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="个人笔记">
    <link rel="preload" href="/awesome/assets/css/0.styles.d47d1918.css" as="style"><link rel="preload" href="/awesome/assets/js/app.fcff2312.js" as="script"><link rel="preload" href="/awesome/assets/js/2.2e371d65.js" as="script"><link rel="preload" href="/awesome/assets/js/9.669003ed.js" as="script"><link rel="prefetch" href="/awesome/assets/js/10.95d01588.js"><link rel="prefetch" href="/awesome/assets/js/11.8d020fbc.js"><link rel="prefetch" href="/awesome/assets/js/12.12223ab0.js"><link rel="prefetch" href="/awesome/assets/js/13.f61c2404.js"><link rel="prefetch" href="/awesome/assets/js/14.62ae3845.js"><link rel="prefetch" href="/awesome/assets/js/15.8826397e.js"><link rel="prefetch" href="/awesome/assets/js/16.1291c7bd.js"><link rel="prefetch" href="/awesome/assets/js/17.c6e4a048.js"><link rel="prefetch" href="/awesome/assets/js/18.3357caf0.js"><link rel="prefetch" href="/awesome/assets/js/19.c3086064.js"><link rel="prefetch" href="/awesome/assets/js/20.cc262107.js"><link rel="prefetch" href="/awesome/assets/js/21.63a497df.js"><link rel="prefetch" href="/awesome/assets/js/22.e9e7b767.js"><link rel="prefetch" href="/awesome/assets/js/23.a4e7bb47.js"><link rel="prefetch" href="/awesome/assets/js/24.579a35b5.js"><link rel="prefetch" href="/awesome/assets/js/25.8deca1e3.js"><link rel="prefetch" href="/awesome/assets/js/26.abd36110.js"><link rel="prefetch" href="/awesome/assets/js/27.687df9fe.js"><link rel="prefetch" href="/awesome/assets/js/28.3f520db5.js"><link rel="prefetch" href="/awesome/assets/js/29.12e198cd.js"><link rel="prefetch" href="/awesome/assets/js/3.9f420c01.js"><link rel="prefetch" href="/awesome/assets/js/30.e0fcf476.js"><link rel="prefetch" href="/awesome/assets/js/31.fdde3800.js"><link rel="prefetch" href="/awesome/assets/js/32.6dfd557c.js"><link rel="prefetch" href="/awesome/assets/js/33.d9154972.js"><link rel="prefetch" href="/awesome/assets/js/34.05cd94af.js"><link rel="prefetch" href="/awesome/assets/js/35.f647aca1.js"><link rel="prefetch" href="/awesome/assets/js/36.2fc1ccd2.js"><link rel="prefetch" href="/awesome/assets/js/37.41a0c9e1.js"><link rel="prefetch" href="/awesome/assets/js/38.2632606f.js"><link rel="prefetch" href="/awesome/assets/js/39.631af937.js"><link rel="prefetch" href="/awesome/assets/js/4.8fcdcea6.js"><link rel="prefetch" href="/awesome/assets/js/40.78e44977.js"><link rel="prefetch" href="/awesome/assets/js/41.7568357f.js"><link rel="prefetch" href="/awesome/assets/js/42.c2858df7.js"><link rel="prefetch" href="/awesome/assets/js/43.eca4a2a0.js"><link rel="prefetch" href="/awesome/assets/js/44.b4cf7a83.js"><link rel="prefetch" href="/awesome/assets/js/45.c5ead458.js"><link rel="prefetch" href="/awesome/assets/js/46.828c228d.js"><link rel="prefetch" href="/awesome/assets/js/47.4faf77ed.js"><link rel="prefetch" href="/awesome/assets/js/48.739107ab.js"><link rel="prefetch" href="/awesome/assets/js/49.027988df.js"><link rel="prefetch" href="/awesome/assets/js/5.76582b93.js"><link rel="prefetch" href="/awesome/assets/js/50.7479d4a1.js"><link rel="prefetch" href="/awesome/assets/js/51.85a2de51.js"><link rel="prefetch" href="/awesome/assets/js/52.1f8cca18.js"><link rel="prefetch" href="/awesome/assets/js/53.a9975d7f.js"><link rel="prefetch" href="/awesome/assets/js/54.1698e607.js"><link rel="prefetch" href="/awesome/assets/js/55.e3aa0bf9.js"><link rel="prefetch" href="/awesome/assets/js/56.9024ad4a.js"><link rel="prefetch" href="/awesome/assets/js/57.4a4bba2b.js"><link rel="prefetch" href="/awesome/assets/js/58.e6bc43ab.js"><link rel="prefetch" href="/awesome/assets/js/59.b999010d.js"><link rel="prefetch" href="/awesome/assets/js/6.669defe3.js"><link rel="prefetch" href="/awesome/assets/js/60.d30eca61.js"><link rel="prefetch" href="/awesome/assets/js/61.3662bcaa.js"><link rel="prefetch" href="/awesome/assets/js/62.bb01837a.js"><link rel="prefetch" href="/awesome/assets/js/63.22b5dee5.js"><link rel="prefetch" href="/awesome/assets/js/64.540165b5.js"><link rel="prefetch" href="/awesome/assets/js/65.bbcbcddc.js"><link rel="prefetch" href="/awesome/assets/js/66.461954d1.js"><link rel="prefetch" href="/awesome/assets/js/67.818a4571.js"><link rel="prefetch" href="/awesome/assets/js/68.e55b6eeb.js"><link rel="prefetch" href="/awesome/assets/js/69.105e9331.js"><link rel="prefetch" href="/awesome/assets/js/7.24809ca5.js"><link rel="prefetch" href="/awesome/assets/js/70.ea2c1dfb.js"><link rel="prefetch" href="/awesome/assets/js/71.12ec1676.js"><link rel="prefetch" href="/awesome/assets/js/72.6b762e67.js"><link rel="prefetch" href="/awesome/assets/js/73.0f6d406e.js"><link rel="prefetch" href="/awesome/assets/js/8.5f4af89c.js">
    <link rel="stylesheet" href="/awesome/assets/css/0.styles.d47d1918.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/awesome/" class="home-link router-link-active"><!----> <span class="site-name">Awesome-FE</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/awesome/fn.html" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/awesome/bn.html" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/awesome/note.html" class="nav-link">
  笔记
</a></div><div class="nav-item"><a href="/awesome/interview.html" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="https://github.com/Composur" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/awesome/fn.html" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/awesome/bn.html" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/awesome/note.html" class="nav-link">
  笔记
</a></div><div class="nav-item"><a href="/awesome/interview.html" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="https://github.com/Composur" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>1. 基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/awesome/http.html#请求库默认携带-cookie-的情况" class="sidebar-link">请求库默认携带 cookie 的情况</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="_1-基础"><a href="#_1-基础" class="header-anchor">#</a> 1. 基础</h3> <h4 id="_1-1-http-、https"><a href="#_1-1-http-、https" class="header-anchor">#</a> 1.1 http 、https</h4> <ul><li><p>Http协议是什么？有哪些特点？</p> <ul><li>header + body 结。 <strong>起始行 + 头部 + 空行 + 实体</strong></li></ul> <div class="language-http extra-class"><pre class="language-http"><code># 起始行 方法 + 路径 + 版本号
<span class="token request-line"><span class="token property">GET</span> /home HTTP/1.1</span>
</code></pre></div></li> <li><p>GET 与 POST 有什么区别？</p> <ul><li></li></ul></li></ul> <ol><li>在HTML的form 标签里，method支持哪些类型？</li> <li>状态码 200、301、302、304、403、404、500、503分别代表什么？</li> <li>Web安全中有哪些常见的攻击方式？</li></ol> <ul><li><p>http 进行非对称加密，得到 https，这个过程是怎么样的？什么是 CA 证书？整个网站进行验证的流程是什么？</p> <p>由于 http 明文传输，传输报文对外透明，非常不安全。https 并不是一个新协议</p> <p>https = http + ssl/tsl</p> <p>浏览器发送 client_random 等</p> <p>服务端确认 server_random tls 版本等</p> <p>客户端验证证书，验证通过 生成 secret</p> <p>服务端生成 secret</p> <p>Tsl 是一个双向验证的过程，握手正式结束后，HTTP 才开始正式的加密报文传输。</p> <p>采用 hash 算法，公钥加密，私钥解密</p></li> <li><p>http 各个版本的区别是什么？解决了哪些问题？比如头部缩减的优化，那你了解这个优化的具体策略吗？缩减了什么？又增加了什么？要深挖细节。</p> <ul><li>http 1.1 的缺陷高延时，带来的页面加载速度降低。
<ul><li>将同一页面的资源分散到不同域名下（Chrome对于同一个域名，默认允许同时建立 6 个 TCP持久连接）</li> <li>Spriting合并多张小图为一张大图</li></ul></li> <li>http 头部巨大 （&quot;User Agent&quot;&quot;Cookie&quot;&quot;Accept&quot;&quot;Server&quot;）等</li> <li>http 1.1 解决了明文传输--带来的不安全性</li> <li>http2
<ul><li>HTTP/2基于SPDY，专注于性能，最大的一个目标是在用户和网站间只用一个连接（connection）</li> <li>使用HTTP/2能带来20%~60%的效率提升。</li></ul></li></ul></li> <li><p>HTTP 2 新特性</p> <ul><li>资源优先级和依赖设置</li> <li>服务器推送</li> <li>流量控制</li> <li>重置消息</li> <li>头部压缩、二进制传输
<ul><li>以二进制方式传输 和 Header 压缩，。建立索引表让请求头字段得到极大程度的精简和复用。原来的&quot;Header+Body&quot;的消息&quot;打散&quot;为数个小片的二进制&quot;帧，用<strong>Headers帧</strong>存放头部字段，<strong>Data帧</strong>存放请求体数据</li></ul></li> <li>多路复用
<ul><li><strong>HTTP/2是基于二进制“帧”的协议，HTTP/1.1是基于“文本分割” （key:value）解析的协议。</strong> 所有 HTTP2很好的解决了浏览器限制同一个域名下的请求数量的问题，同时也接更容易实现全速传输</li> <li>一次请求完成（html css js 下载到浏览器）</li></ul></li> <li>HTTP/2 使用 TCP 协议来传输的，而如果使用 HTTPS 的话，还需要使用 TLS 协议进行安全传输，而使用TLS也需要一个握手过程，<strong>这样就需要有两个握手延迟过程</strong>：</li></ul></li> <li><p>HTTP 1、2、3</p> <p><img src="/awesome/assets/img/http3.d0b32f45.jpg" alt="http3"></p> <ul><li><p>http3 基于 UDP 的 Quic</p></li> <li><p>HTTP/1.1 有两个主要的缺点：安全不足和性能不高。</p></li> <li><p>HTTP/2 完全兼容HTTP/1，是“更安全的HTTP、更快的HTTPS&quot;，头部压缩、多路复用等技术可以充分利用带宽，降低延迟，从而大幅度提高上网体验；</p></li> <li><p>QUIC 基于 UDP 实现，是 HTTP/3 中的底层支撑协议，该协议基于 UDP，又取了 TCP 中的精华，实现了既快又可靠的协议</p></li></ul></li></ul> <ol><li></li> <li>URI和URL的区别？
<ul><li>URI是<code>Uniform Resource Identifier</code>的缩写,统一资源标识符,即由某个协议方案表示的资源的定位标识符</li> <li>URI 用字符串标识某一互联网资源，而 URL表示资源的地点（互联网上所处的位置）。可见 URL是 URI 的子集<br></li> <li>URI的例子
<img src="http://cdn.xutong.top/uri.jpg" alt="uri"></li> <li>绝对URI的格式,遵循以下规则。
<img src="/awesome/assets/img/uri02.122cb877.jpg" alt="uri"></li></ul></li> <li>一次完整的Http请求所经历哪些步骤？</li></ol> <h3 id="_2-进阶"><a href="#_2-进阶" class="header-anchor">#</a> 2. 进阶</h3> <ul><li>说说Http协议的工作流程</li> <li>Http请求报文与响应报文的格式？</li> <li>Http首部包含哪些字段？举例说明</li> <li>Https的原理是什么？</li> <li>浅析Http和Https的三次握手有什么区别。</li> <li>谈谈Session/cookie机制，如何实现会话跟踪？</li> <li>什么是Web缓存？原理如何？</li> <li>OSI有哪七层模型？TCP/IP是哪四层模型。</li> <li>讲一讲TCP协议的三次握手和四次挥手流程。</li> <li>为什么TCP建立连接协议是三次握手，而关闭连接却是四次握手呢？为什么不能用两次握手进行连接？</li> <li>websockt是什么？和Http有什么区别？</li></ul> <h3 id="_3-高级"><a href="#_3-高级" class="header-anchor">#</a> 3. 高级</h3> <ul><li>什么是非持久连接，什么是持久连接？</li> <li>Keep-Alive: timeout=5, max=100是什么意思？</li> <li>http1.0，http1.1，http2.0区别（HTTP1.1版本新特性？HTTP2版本新特性？）</li> <li>对Http代理做个介绍？</li> <li>常见的鉴权方式有哪些？</li> <li>http 2 http3
<ul><li>以富媒体（如图片、声音、视频）</li></ul></li></ul> <h3 id="_1-cookie"><a href="#_1-cookie" class="header-anchor">#</a> 1. Cookie</h3> <blockquote><p>Cookie（复数形态Cookies），类型为「小型文本文件」，指某些网站为了辨别用户身份而储存在用户本地终端上的数据。</p></blockquote> <h4 id="_1-1-cookie-有什么用？"><a href="#_1-1-cookie-有什么用？" class="header-anchor">#</a> 1.1 Cookie 有什么用？</h4> <p>为了解决 <code>HTTP</code> 无状态导致的问题中，客户端与服务端会话状态的问题。这个状态单指后端服务的状态而非通信协议的状态。</p> <ol><li>会话状态管理（如用户登录状态、购物车、游戏分数或其它需要记录的信息）</li> <li>个性化设置（如用户自定义设置、主题等）</li> <li>浏览器行为跟踪（如跟踪分析用户行为等）</li></ol> <h4 id="_1-2-cookie-有哪些部分组成？"><a href="#_1-2-cookie-有哪些部分组成？" class="header-anchor">#</a> 1.2 Cookie 有哪些部分组成？</h4> <p>作为一段一般不超过 4KB 的小型文本数据，它由一个名称（Name）、一个值（Value）和其它几个用于控制 Cookie 有效期、安全性、使用范围的可选属性组成。</p> <ul><li><p>Name / Value</p> <ul><li>用 JavaScript 操作 Cookie 的时候注意对 Value 进行编码处理。</li></ul></li> <li><p>Expirse</p> <ul><li>用于设置 Cookie 的过期时间。</li> <li>当 Expires 属性缺省时，表示是会话性 Cookie。关闭浏览器失效。有些浏览器提供了会话恢复功能，这样会保存 Cookie。</li> <li>过期的时间只与客户端相关，而不是服务端。</li></ul></li> <li><p>Max-Age</p> <ul><li><p>用于设置在 Cookie 失效之前需要经过的秒数</p> <div class="language-js extra-class"><pre class="language-js"><code>res<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'userid'</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>_id<span class="token punctuation">,</span> <span class="token punctuation">{</span>maxAge<span class="token operator">:</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>Max-Age 可以为正数、负数、甚至是 0。</p></li> <li><p>如果 max-Age 属性为正数时，浏览器会将其持久化，即写到对应的 Cookie 文件中。</p></li> <li><p>当 max-Age 属性为负数，则表示该 Cookie 只是一个会话性 Cookie。</p></li> <li><p>当 max-Age 为 0 时，则会立即删除这个 Cookie。</p></li> <li><p>假如 Expires 和 Max-Age 都存在，Max-Age 优先级更高。</p></li></ul></li> <li><p>Domain</p> <ul><li><p>指定了 Cookie 可以送达的主机名</p></li> <li><p>没有指定默认是当前主机部分（不含子域名）</p> <div class="language-http extra-class"><pre class="language-http"><code>.xxx.com
</code></pre></div></li></ul></li> <li><p>Path</p> <ul><li>Domain 和 Path 标识共同定义了 Cookie 的作用域：即 Cookie 应该发送给哪些 URL</li></ul></li> <li><p>Secure</p> <ul><li>标记为 Secure 的 Cookie 只应通过被 HTTPS 协议加密过的请求发送给服务端</li></ul></li> <li><p>HTTPOnly</p> <ul><li>设置 HTTPOnly 属性可以防止客户端脚本通过 document.cookie 等方式访问 Cookie，有助于避免 XSS 攻击。</li></ul></li> <li><h4 id="samesite"><a href="#samesite" class="header-anchor">#</a> SameSite</h4> <p><em>Chrome80 版本中默认屏蔽了第三方的 Cookie</em></p> <ul><li>SameSite 属性可以让 Cookie 在跨站请求时不会被发送，从而可以阻止跨站请求伪造攻击（CSRF）。
<ul><li><strong>Strict</strong>浏览器将只发送相同站点请求的 Cookie,当前网页 URL 与请求目标 URL 需完全一致。</li> <li><strong>Lax</strong> 允许部分第三方请求携带 Cookie</li> <li><strong>None</strong> 无论是否跨站都会发送 Cookie</li></ul></li> <li>之前默认是 None 的，Chrome80 后默认是 Lax。</li></ul></li></ul> <h4 id="_1-3-如何查看-cookie"><a href="#_1-3-如何查看-cookie" class="header-anchor">#</a> 1.3 如何查看 Cookie ?</h4> <ul><li>可以在浏览器的开发者工具中查看到当前页面的 Cookie</li> <li>可以在计算机上查看本机的 Cookies 文件 (<small>以 Mac 为例</small>)
<ul><li>路径为:<code>/Users/haizhi/Library/ApplicationSupport/Google/Chrome/Default</code></li> <li>它是一个 <code>sqlite</code> 数据库文件，可以用 <code>sqlite</code> 客户端打开查看。</li></ul></li></ul> <h4 id="_1-4-怎么设置-cookie"><a href="#_1-4-怎么设置-cookie" class="header-anchor">#</a> 1.4 怎么设置 Cookie</h4> <ol><li><p>客户端发送 HTTP 请求到服务器</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 登录</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">reqLogin</span> <span class="token operator">=</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>当服务器收到 HTTP 请求时，在响应头里面添加一个 Set-Cookie 字段 (<small><code>express</code> 为例</small>)</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// if success</span>
  res<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'userid'</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span>_id<span class="token punctuation">,</span> <span class="token punctuation">{</span>maxAge<span class="token operator">:</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>浏览器收到响应后保存下 Cookie</p> <p>收到响应：</p> <p><img src="/Users/haizhi/personal/awesome/docs/img/set-cookie.jpg" alt="setCookie"></p> <p>保存 Cookie:</p> <p><img src="/Users/haizhi/personal/awesome/docs/img/cookie_store.jpg" alt="cookie的存储"></p></li> <li><p>之后对该服务器每一次请求中都通过 Cookie 字段将 Cookie 信息发送给服务器。</p> <p><img src="/Users/haizhi/personal/awesome/docs/img/send-cookie.jpg" alt="发送Cookie"></p></li></ol> <h4 id="_1-5-cookie-的缺点"><a href="#_1-5-cookie-的缺点" class="header-anchor">#</a> 1.5 Cookie 的缺点</h4> <ul><li>大小方向</li> <li>安全方向</li> <li>增加请求方向</li></ul> <h2 id="请求库默认携带-cookie-的情况"><a href="#请求库默认携带-cookie-的情况" class="header-anchor">#</a> 请求库默认携带 cookie 的情况</h2> <ul><li><p>fetch</p> <ul><li><code>fetch</code> 在默认情况下, 不管是同域还是跨域`` ajax<code>请求都不会带上</code>cookie<code>, 只有当设置了</code>credentials<code>时才会带上该</code>ajax<code>请求所在域的</code>cookie<code>, 服务端需要设置响应头</code>Access-Control-Allow-Credentials: true`, 否则浏览器会因为安全限制而报错, 拿不到响应</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    credentials<span class="token operator">:</span> <span class="token string">&quot;include&quot;</span><span class="token punctuation">,</span> <span class="token comment">// include, same-origin, omit</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// include: 跨域 ajax 带上 cookie</span>
<span class="token comment">// same-origin: 仅同域 ajax 带上 cookie</span>
<span class="token comment">// omit: 任何情况都不带 cookie</span>
</code></pre></div></li> <li><p>axios</p> <ul><li><code>axios</code> 和 <code>jQuery</code> 在同域 <code>ajax</code> 请求时会带上 <code>cookie</code>, 跨域请求不会, 跨域请求需要设置 <code>withCredentials</code> 和服务端响应头</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://server.com'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>withCredentials<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/awesome/assets/js/app.fcff2312.js" defer></script><script src="/awesome/assets/js/2.2e371d65.js" defer></script><script src="/awesome/assets/js/9.669003ed.js" defer></script>
  </body>
</html>
